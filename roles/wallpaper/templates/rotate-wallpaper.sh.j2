#!/bin/bash
# Rotate wallpaper from folder
WALLPAPER_DIR="{{ wallpaper_dir }}"

if [ ! -d "$WALLPAPER_DIR" ]; then
    exit 1
fi

WALLPAPER=$(find "$WALLPAPER_DIR" -type f \( -name "*.jpg" -o -name "*.jpeg" -o -name "*.png" -o -name "*.webp" \) | shuf -n 1)

if [ -n "$WALLPAPER" ]; then
    gsettings set org.gnome.desktop.background picture-uri "file://$WALLPAPER"
    gsettings set org.gnome.desktop.background picture-uri-dark "file://$WALLPAPER"
fi
